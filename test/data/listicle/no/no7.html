<!doctype html><html class="no-js" lang="en"><head><meta charset="utf-8"><meta content="ie=edge" http-equiv="x-ua-compatible"><meta content="width=device-width,initial-scale=1,viewport-fit=cover" name="viewport"><meta content="#da532c" name="msapplication-TileColor"><meta content="#ffffff" name="theme-color"><meta content="website" property="og:type"><meta content="https://0x65.dev/blog/2019-12-10/search-quality-at-cliqz.html" property="og:url"><meta content="Search Quality at Cliqz" property="og:title"><meta content="https://0x65.dev/static/img/posts/search-quality/thumbnail.jpg" property="og:image"><meta content="The whys and hows of human search quality assessment" property="og:description"><meta content="Tech @ Cliqz" property="og:site_name"><meta content="en_US" property="og:locale"><meta content="summary" name="twitter:card"><meta content="Search Quality at Cliqz" name="twitter:title"><meta content="The whys and hows of human search quality assessment" name="twitter:description"><meta content="https://0x65.dev/static/img/posts/search-quality/thumbnail.jpg" name="twitter:image"><title>Search Quality at Cliqz</title><meta content="The whys and hows of human search quality assessment" name="description"><link href="../../apple-touch-icon.png" rel="apple-touch-icon" sizes="114x114"><link href="../../favicon-32x32.png" rel="icon" sizes="32x32" type="image/png"><link href="../../favicon-16x16.png" rel="icon" sizes="16x16" type="image/png"><style rel="stylesheet" type="text/css">@font-face{font-display:swap;font-family:'Fira Code';font-style:normal;font-weight:300;src:url(../../static/fonts/FiraCode/woff2/FiraCode-Light.woff2) format('woff2'),url(../../static/fonts/FiraCode/woff/FiraCode-Light.woff) format('woff')}@font-face{font-display:swap;font-family:'Fira Code';font-style:normal;font-weight:400;src:url(../../static/fonts/FiraCode/woff2/FiraCode-Regular.woff2) format('woff2'),url(../../static/fonts/FiraCode/woff/FiraCode-Regular.woff) format('woff')}@font-face{font-display:swap;font-family:'Fira Code';font-style:normal;font-weight:500;src:url(../../static/fonts/FiraCode/woff2/FiraCode-Medium.woff2) format('woff2'),url(../../static/fonts/FiraCode/woff/FiraCode-Medium.woff) format('woff')}@font-face{font-display:swap;font-family:'Fira Code';font-style:normal;font-weight:700;src:url(../../static/fonts/FiraCode/woff2/FiraCode-Bold.woff2) format('woff2'),url(../../static/fonts/FiraCode/woff/FiraCode-Bold.woff) format('woff')}@font-face{font-display:swap;font-family:'Fira Code VF';font-style:normal;font-weight:300 700;src:url(../../static/fonts/FiraCode/woff2/FiraCode-VF.woff2) format('woff2-variations'),url(../../static/fonts/FiraCode/woff/FiraCode-VF.woff) format('woff-variations')}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:300;src:url(../../static/fonts/Merriweather/merriweather-v19-latin-300.woff2) format('woff2'),url(../../static/fonts/Merriweather/merriweather-v19-latin-300.woff) format('woff')}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:300;src:url(../../static/fonts/Merriweather/merriweather-v19-latin-300italic.woff2) format('woff2'),url(../../static/fonts/Merriweather/merriweather-v19-latin-300italic.woff) format('woff')}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:400;src:url(../../static/fonts/Merriweather/merriweather-v19-latin-regular.woff2) format('woff2'),url(../../static/fonts/Merriweather/merriweather-v19-latin-regular.woff) format('woff')}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:400;src:url(../../static/fonts/Merriweather/merriweather-v19-latin-italic.woff2) format('woff2'),url(../../static/fonts/Merriweather/merriweather-v19-latin-italic.woff) format('woff')}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:700;src:url(../../static/fonts/Merriweather/merriweather-v19-latin-700.woff2) format('woff2'),url(../../static/fonts/Merriweather/merriweather-v19-latin-700.woff) format('woff')}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:700;src:url(../../static/fonts/Merriweather/merriweather-v19-latin-700italic.woff2) format('woff2'),url(../../static/fonts/Merriweather/merriweather-v19-latin-700italic.woff) format('woff')}@font-face{font-display:swap;font-family:Merriweather;font-style:normal;font-weight:900;src:url(../../static/fonts/Merriweather/merriweather-v19-latin-900.woff2) format('woff2'),url(../../static/fonts/Merriweather/merriweather-v19-latin-900.woff) format('woff')}@font-face{font-display:swap;font-family:Merriweather;font-style:italic;font-weight:900;src:url(../../static/fonts/Merriweather/merriweather-v19-latin-900italic.woff2) format('woff2'),url(../../static/fonts/Merriweather/merriweather-v19-latin-900italic.woff) format('woff')}</style><style rel="stylesheet" type="text/css">@keyframes loading{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes slide-down{0%{opacity:0;transform:translateY(-1.6rem)}to{opacity:1;transform:translateY(0)}}@keyframes carousel-slidein{0%{transform:translateX(100%)}to{transform:translateX(0)}}@keyframes carousel-slideout{0%{opacity:1;transform:translateX(0)}to{opacity:1;transform:translateX(-50%)}}@keyframes first-run{0%,to{width:0}25%{width:2.4rem}50%{width:.8rem}75%{width:1.2rem}}@keyframes progress-indeterminate{0%{background-position:200% 0}to{background-position:-200% 0}}body{max-width:1000px;margin:auto!important;background:#fff;color:#3b4351;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",sans-serif;font-size:.8rem;overflow-x:hidden;text-rendering:optimizeLegibility}.navbar{margin-bottom:2rem;margin-top:1.5rem}.navbar .logo,.off-canvas #sidebar{background:#fff;font-family:Firacode-Regular,monospace}.navbar .logo{border:0;border-bottom:solid 2px #000;color:#000;font-size:21px;font-weight:700;padding-left:10px;padding-right:10px}.navbar .logo :hover{background:#fff;color:#000;text-decoration:none}h2,h3,h4,h5{font-family:Merriweather,Georgia,serif,Georgia,serif!important;font-weight:900!important;line-height:1.2!important;margin-bottom:.5rem!important;margin-top:1.5rem!important;text-rendering:optimizeLegibility!important}h2{font-size:1.2rem!important;margin-top:72px!important}h3{font-size:1.1rem!important}h4{font-size:1.05rem!important}h5{font-size:1rem!important}.post-container{color:#000;font-family:Merriweather,Georgia,serif;margin-left:auto;margin-right:auto;max-width:700px;padding:1rem}.post-container ul{line-height:1.75;list-style:disc;margin-left:42px}.post-container ol{list-style:decimal;margin-left:42px}.post-container blockquote{border-left:4px solid #000;margin:20px 20px 20px -24px;padding:5px 20px}.post-container blockquote p{color:#555;display:block;font-style:italic;line-height:1.75;margin:0;width:100%}.post-container p{line-height:1.75;margin-bottom:1.15rem}.post-container figcaption{color:#777;font-size:.8em;font-style:italic;margin-top:-32px}.post-container figure,.post-container img{display:block;margin:40px 0;max-width:100%;width:100%}.post-container .code,.post-container code,.post-container pre{background-color:#e9edf2!important;color:#000;font-family:Firacode-Regular,monospace;font-size:14px;overflow-x:auto}.post-container .post-header{min-width:80%}.post-container .post-header .post-title{font-family:Merriweather,Georgia,serif;font-size:1.5rem;font-weight:700;line-height:1.1;text-align:left}.post-container .post-header .post-subtitle{font-size:1em;margin-bottom:42px;margin-top:-1rem}.post-container .post-header .post-meta-time{color:#999;font-family:Firacode-Regular,monospace;font-size:.7rem}.post-container .post-header .post-meta-tags{margin-bottom:5px}.post-container .post-header .post-tag{color:#999;display:inline;font-family:Firacode-Regular,monospace;font-size:.7rem;margin-right:10px}.post-container .post-header .meta-time{margin-bottom:2rem}.post-container .post-header .meta-time p{margin-bottom:0}.post-container a{box-shadow:0 1px 0 0 currentColor;color:#000}.post-container a:hover{color:#00f;text-decoration:none}.post-container .share-text{color:#555;font-size:.6rem;margin-bottom:-5px;margin-top:70px;text-align:left}.post-container .share-hr{border:solid .5px #fcf5f5;margin-left:0;width:39%}.post-container .share{margin-top:-48px}.post-container .share li{display:inline;margin-left:-15px;margin-right:28px}.post-container .share a{box-shadow:none;text-decoration:none}.post-container .share img{display:inline;max-height:25px;max-width:25px}.snippet:hover,a{text-decoration:none}.snippet:hover{background:#fcf5f5;color:#000}.footnotes-sep,.off-canvas{display:none}.off-canvas #sidebar{height:100vh;min-width:20%;padding-left:2%;padding-right:2%;padding-top:12%}.off-canvas .content{min-height:calc(100vh - 150px)}.off-canvas .off-canvas-toggle{color:#000;margin-left:5%;margin-top:1.5rem}.off-canvas .accordion-header{color:#000;font-weight:700;padding:0}.off-canvas .off-canvas-content{flex:1 1 auto!important;min-width:70%!important;padding:.4rem!important}.footnotes .footnote-item{margin-bottom:-15px;margin-left:-20px;margin-top:0}footer .links .link a,footer p{font-family:Firacode-Regular,monospace;font-size:.5rem}footer p{background-color:#fff;color:#999;text-align:center;width:100%}footer .links{align-items:center;display:flex;justify-content:center}footer .links .link{margin:0 20px}footer .links .link a{color:#000}footer .links .link a:visited{color:#000}footer .logo-footer{height:10px;margin-right:7px;width:10px}html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;box-sizing:border-box;font-size:20px;line-height:1.5;-webkit-tap-highlight-color:transparent}article,details,figcaption,figure,footer,header,main,section{display:block}hr{box-sizing:content-box;height:0;overflow:visible}a{background-color:transparent;color:#5755d9;outline:0}a:active,a:hover{outline-width:0}address{font-style:normal}strong{font-weight:bolder}code,pre{font-family:"SF Mono","Segoe UI Mono","Roboto Mono",Menlo,Courier,monospace}pre{font-size:1em}sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline;top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}select{font-family:inherit;font-size:inherit;line-height:inherit;margin:0;text-transform:none}[type=submit]{-webkit-appearance:button}[type=submit]::-moz-focus-inner{border-style:none;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}summary{display:list-item;outline:0}*,::after,::before{box-sizing:inherit}.btn:focus,a:focus{box-shadow:0 0 0 .1rem rgba(87,85,217,.2)}a:active,a:focus,a:hover{color:#302ecd;text-decoration:underline}a:visited{color:#807fe2}h2,h3,h4,h5{color:inherit;margin-bottom:.5em}h3,h4,h5{margin-top:0}.h2,.h3,.h4,.h5{font-weight:500}.h2{font-size:1.6rem}.h3{font-size:1.4rem}.h4{font-size:1.2rem}.h5{font-size:1rem}p{margin:0 0 1.2rem}a,u{-webkit-text-decoration-skip:ink edges;text-decoration-skip:ink edges}blockquote{border-left:.1rem solid #dadee4;margin-left:0;padding:.4rem .8rem}blockquote p:last-child{margin-bottom:0}ol,ul{padding:0}ol,ol ol,ol ul,ul,ul ol,ul ul{margin:.8rem 0 .8rem .8rem}ol li,ul li{margin-top:.4rem}ul{list-style:disc inside}ul ul{list-style-type:circle}ol{list-style:decimal inside}ol ol{list-style-type:lower-alpha}html:lang(zh),html:lang(zh-Hans){font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang SC","Hiragino Sans GB","Microsoft YaHei","Helvetica Neue",sans-serif}html:lang(zh-Hant){font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"PingFang TC","Hiragino Sans CNS","Microsoft JhengHei","Helvetica Neue",sans-serif}html:lang(ja){font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Hiragino Sans","Hiragino Kaku Gothic Pro","Yu Gothic",YuGothic,Meiryo,"Helvetica Neue",sans-serif}html:lang(ko){font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Malgun Gothic","Helvetica Neue",sans-serif}.table{border-collapse:collapse;border-spacing:0;width:100%;text-align:left}.table.table-striped tbody tr:nth-of-type(odd){background:#f7f8f9}.table td,.table th{border-bottom:.05rem solid #dadee4;padding:.6rem .4rem}.table th{border-bottom-width:.1rem}.btn{-webkit-appearance:none;-moz-appearance:none;appearance:none;background:#fff;border:.05rem solid #5755d9;border-radius:.1rem;color:#5755d9;cursor:pointer;display:inline-block;font-size:.8rem;height:1.8rem;line-height:1.2rem;outline:0;padding:.25rem .4rem;text-align:center;text-decoration:none;transition:background .2s,border .2s,box-shadow .2s,color .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:middle;white-space:nowrap}.btn:focus,.btn:hover{background:#f1f1fc;border-color:#4b48d6;text-decoration:none}.btn:active{background:#4b48d6;border-color:#3634d2;color:#fff;text-decoration:none}.btn:active.loading::after{border-bottom-color:#fff;border-left-color:#fff}.btn:disabled{cursor:default;opacity:.5;pointer-events:none}.btn.btn-link{background:0 0;border-color:transparent;color:#5755d9}.btn.btn-link:active,.btn.btn-link:focus,.btn.btn-link:hover{color:#302ecd}.code,code{border-radius:.1rem}code{line-height:1.25;padding:.1rem .2rem;background:#fcf2f2;color:#d73e48;font-size:85%}.code{color:#3b4351;position:relative}.code::before{color:#bcc3ce;content:attr(data-lang);font-size:.7rem;position:absolute;right:.4rem;top:.1rem}.code code{background:#f7f8f9;color:inherit;display:block;line-height:1.5;overflow-x:auto;padding:1rem;width:100%}.figure{margin:0 0 .4rem}.navbar{align-items:stretch;display:flex;flex-wrap:wrap;justify-content:space-between}.accordion[open] .accordion-header .icon{transform:rotate(90deg)}.accordion .accordion-header{display:block;padding:.2rem .4rem}.accordion .accordion-header .icon{transition:transform .25s}summary.accordion-header::-webkit-details-marker{display:none}.card{background:#fff;border:.05rem solid #dadee4;border-radius:.1rem;display:flex;flex-direction:column}.divider{display:block;position:relative;border-top:.05rem solid #f1f3f5;height:.05rem;margin:.4rem 0}.loading{color:transparent!important;min-height:.8rem;pointer-events:none;position:relative}.loading::after{-webkit-animation:loading .5s infinite linear;animation:loading .5s infinite linear;border:.1rem solid #5755d9;border-radius:50%;border-right-color:transparent;border-top-color:transparent;content:"";display:block;height:.8rem;left:50%;margin-left:-.4rem;margin-top:-.4rem;position:absolute;top:50%;width:.8rem;z-index:1}.p-centered{display:block;float:none;margin-left:auto;margin-right:auto}.off-canvas{display:flex;flex-flow:nowrap;height:100%;position:relative;width:100%}.off-canvas .off-canvas-toggle{display:block;position:absolute;top:.4rem;transition:none;z-index:1;left:.4rem}.off-canvas .off-canvas-sidebar{background:#f7f8f9;bottom:0;min-width:10rem;overflow-y:auto;position:fixed;top:0;transition:transform .25s;z-index:200;left:0;transform:translateX(-100%)}.off-canvas .off-canvas-content{height:100%}.off-canvas .off-canvas-overlay{background:rgba(48,55,66,.1);border-color:transparent;border-radius:0;bottom:0;display:none;height:100%;left:0;position:fixed;right:0;top:0;width:100%}.off-canvas .off-canvas-sidebar:target{transform:translateX(0)}.off-canvas .off-canvas-sidebar:target~.off-canvas-overlay{display:block;z-index:100}.icon{box-sizing:border-box;display:inline-block;font-size:inherit;font-style:normal;height:1em;position:relative;text-indent:-9999px;vertical-align:middle;width:1em}.icon::after,.icon::before{content:"";display:block;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%)}.accordion .icon,.btn .icon{vertical-align:-10%}.icon-menu::before{background:currentColor;box-shadow:0 -.35em,0 .35em;height:.1rem;width:100%}.katex{font:1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0;text-rendering:auto}.katex *{-ms-high-contrast-adjust:none!important}.katex .katex-mathml{border:0;clip:rect(1px,1px,1px,1px);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.katex .base{position:relative;white-space:nowrap;width:min-content}.katex .base,.katex .strut,.katex .vlist>span>span{display:inline-block}.katex .mathdefault{font-family:KaTeX_Math;font-style:italic}.katex .vlist-t{display:inline-table;table-layout:fixed}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;position:relative;vertical-align:bottom}.katex .vlist>span,.katex svg{display:block;height:0;position:relative}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;font-size:1px;min-width:2px;vertical-align:bottom;width:2px}.katex .msupsub{text-align:left}.katex .mfrac>span>span,.katex-display{text-align:center}.katex .mfrac .frac-line{border-bottom-style:solid;display:inline-block;width:100%;min-height:1px}.katex .mspace{display:inline-block}.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .sizing.reset-size3.size3{font-size:1em}.katex .sizing.reset-size6.size1{font-size:.5em}.katex .sizing.reset-size6.size3{font-size:.7em}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .op-symbol,.katex .stretchy{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex svg{fill:currentColor;fill-opacity:1;fill-rule:nonzero;height:inherit;position:absolute;stroke:currentColor;stroke-dasharray:none;stroke-dashoffset:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-opacity:1;stroke-width:1;width:100%}.katex img{border-style:none;max-height:none;max-width:none;min-height:0;min-width:0}.katex .stretchy{display:block;overflow:hidden;width:100%}.katex .stretchy::after,.katex .stretchy::before{content:''}.katex-display{display:block;margin:1em 0}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}</style><style rel="stylesheet" type="text/css">@font-face{font-display:swap;font-family:KaTeX_AMS;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_AMS-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_AMS-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_AMS-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Caligraphic;font-style:normal;font-weight:700;src:url(../../static/katex/fonts/KaTeX_Caligraphic-Bold.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Caligraphic-Bold.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Caligraphic-Bold.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Caligraphic;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Caligraphic-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Caligraphic-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Caligraphic-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Fraktur;font-style:normal;font-weight:700;src:url(../../static/katex/fonts/KaTeX_Fraktur-Bold.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Fraktur-Bold.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Fraktur-Bold.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Fraktur;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Fraktur-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Fraktur-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Fraktur-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Main;font-style:normal;font-weight:700;src:url(../../static/katex/fonts/KaTeX_Main-Bold.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Main-Bold.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Main-Bold.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Main;font-style:italic;font-weight:700;src:url(../../static/katex/fonts/KaTeX_Main-BoldItalic.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Main-BoldItalic.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Main-BoldItalic.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Main;font-style:italic;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Main-Italic.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Main-Italic.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Main-Italic.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Main;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Main-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Main-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Main-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Math;font-style:italic;font-weight:700;src:url(../../static/katex/fonts/KaTeX_Math-BoldItalic.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Math-BoldItalic.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Math-BoldItalic.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Math;font-style:italic;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Math-Italic.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Math-Italic.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Math-Italic.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_SansSerif;font-style:normal;font-weight:700;src:url(../../static/katex/fonts/KaTeX_SansSerif-Bold.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_SansSerif-Bold.wof) format('woff'),url(../../static/katex/fonts/KaTeX_SansSerif-Bold.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_SansSerif;font-style:italic;font-weight:400;src:url(../../static/katex/fonts/KaTeX_SansSerif-Italic.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_SansSerif-Italic.wof) format('woff'),url(../../static/katex/fonts/KaTeX_SansSerif-Italic.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_SansSerif;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_SansSerif-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_SansSerif-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_SansSerif-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Script;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Script-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Script-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Script-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Size1;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Size1-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Size1-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Size1-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Size2;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Size2-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Size2-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Size2-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Size3;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Size3-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Size3-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Size3-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Size4;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Size4-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Size4-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Size4-Regular.tt) format('truetype')}@font-face{font-display:swap;font-family:KaTeX_Typewriter;font-style:normal;font-weight:400;src:url(../../static/katex/fonts/KaTeX_Typewriter-Regular.woff) format('woff2'),url(../../static/katex/fonts/KaTeX_Typewriter-Regular.wof) format('woff'),url(../../static/katex/fonts/KaTeX_Typewriter-Regular.tt) format('truetype')}</style></head><body><div class="off-canvas"><a href="#sidebar" class="btn-link off-canvas-toggle"><i class="icon icon-menu"></i></a><div class="off-canvas-sidebar" id="sidebar"><div class="site-nav"><div class="accordion-container"><div class="accordion"><a href="../../" class="accordion-header" style="margin-bottom:10px">Home</a></div><div class="accordion"><a href="https://cliqz.com/about/team" rel="noopener noreferrer" target="_blank" class="accordion-header" style="margin-bottom:10px">Team</a></div><div class="accordion"><a href="https://cliqz.com/en/about/careers" rel="noopener noreferrer" target="_blank" class="accordion-header" style="margin-bottom:10px">Careers</a></div><div class="accordion"><a href="../../privacy.html" class="accordion-header" style="margin-bottom:10px">Privacy policy</a></div><div class="accordion"><a href="https://cliqz.com/en/legal" rel="noopener noreferrer" target="_blank" class="accordion-header" style="margin-bottom:10px">Impressum</a></div><div class="divider"></div><div class="accordion"><a href="../../pages/dissemination-cliqz.html" class="accordion-header" style="margin-bottom:10px">Dissemination @ Cliqz</a></div></div></div></div><a href="#close" class="off-canvas-overlay"></a><div class="off-canvas-content"><div class="content"><header class="navbar"><section class="p-centered"><a href="../../" class="btn logo">Tech @ Cliqz</a></section></header><div class="post-container"><div class="post-header"><div class="post-meta-tags"><p class="post-tag">search</p><p class="post-tag">quality</p><p class="post-tag">human-evaluation</p></div><p class="post-title">Search Quality at Cliqz</p><p class="post-subtitle">The whys and hows of human search quality assessment</p></div></div><div class="divider"></div><div class="post-container"><div class="post-header"><div class="meta-time"><p class="post-meta-time">December 10th, 2019</p></div><p class="post-body"></p><p>One of the questions that we repeatedly ask ourselves at Cliqz is: “How good is our search quality?”. Not only is it one of our most frequently asked questions, but it is also one of the trickiest to answer. This is because quality is subjective, and at times it has to be quantified. However, this quantification is not straightforward, as all successes and failures cannot be considered equal. You cannot rely on a single number to make a call on quality in absolute sense. What you <em>can</em> do is to use it as your guiding star to see if you are in the right direction or not.</p><p>In previous blog posts, we have talked about data collected by <a href="https://0x65.dev/blog/2019-12-03/human-web-collecting-data-in-a-socially-responsible-manner.html" rel="noopener noreferrer" target="_blank">Human Web</a> and the <a href="https://0x65.dev/blog/2019-12-06/building-a-search-engine-from-scratch.html" rel="noopener noreferrer" target="_blank">technical details</a> of <a href="https://0x65.dev/blog/2019-12-05/a-new-search-engine.html" rel="noopener noreferrer" target="_blank">the search</a>, both necessary to build a search engine. Another integral pillar of search engine development is quality assessment. In fact, this is true for more specific use cases of recommendation and e-commerce systems as well. More often than not, machines do a good job at finding relevant results to queries, but we also need to make sure that the results are good from a user perspective. Machines are very efficient at doing what they are programmed to do, however sometimes, they behave unexpectedly. Identifying spam, bad or adult content cannot be done solely at scale by humans, but at the same time, it cannot be left without human supervision either.</p><p>In today’s post, we will show:</p><ul><li>The importance of human assessment for search quality evaluation and why it is not easy, even for humans.</li><li>Our manually generated dataset of 700k queries corresponding to 3.5m URLs and how we use them to train our machine learning-based models.</li><li>How we use the assessment data to identify blind spots in the system and fix them.</li><li>Where we stand in comparison to the giants of the field—you can already read <a href="#Testimonials">some testimonials</a> at the end of the article.</li></ul><h2>Why We Need Human Evaluation</h2><p>Consider the following two totally different URLs having almost the same content returned for the query <code>die siedler online</code>:</p><ul><li><strong>URL1</strong> – <em>https://www.prosiebengames.de/die-siedler-online</em></li><li><strong>URL2</strong> – <em>https://www.browsergames.de/die-siedler-online</em></li></ul><p>Looking at the URLs, it is quite impossible to identify that these two pages are duplicates. On the other hand, a quick glance at the pages is enough to know that they are indeed very similar. More recently, we have been able to catch such problems and automatically de-duplicate our results on the basis of page content though.</p><figure><a href="../../static/img/posts/search-quality/distinctURLs.jpg"><img alt="" src="../../static/img/posts/search-quality/distinctURLs.jpg"></a><figcaption>Figure 1: Two distinct URLs with similar page content</figcaption></figure><p>Consider another example of a snippet in Polish with a grammatical problem, which a native speaker can catch instantly, but is more work for a machine to identify, if at all. If you are curious, the problem here is that “ul.” (see Figure below) is an abbreviation of the term “street” which (1) requires a street name after it and (2) does not signify the end of the sentence, hence the snippet should end at an ellipsis to show continuity.</p><figure><a href="../../static/img/posts/search-quality/polishSnippet.jpg"><img alt="" src="../../static/img/posts/search-quality/polishSnippet.jpg"></a><figcaption>Figure 2: Polish snippet with grammatical error</figcaption></figure><p>Identifying user intent from partial search queries and responding accordingly is an essential feature of a search engine. For example, when the user is looking for <code>weather mun</code>, it is more probable that the user intent is to check <em>Munich</em>’s weather in Germany, and not that of a tiny district <em>Tuen Mun</em> located in China (also, it is highly unlikely that even Chinese would refer to <em>Tuen Mun</em> as simply Mun—PS: we checked).</p><figure><a href="../../static/img/posts/search-quality/smartCliqz.jpg"><img alt="" src="../../static/img/posts/search-quality/smartCliqz.jpg"></a><figcaption>Figure 3: Misinterpreted user intent</figcaption></figure><p>To answer the question “What is a good quality result?”, it is important to first define what is perceived as NOT a good quality result. In other words, will the users be happy when they see the given set of results? Some further scenarii requiring a human eye for quality check include, but are not limited to: identifying missing (<em>vital</em>) pages and 404s, catching adult or duplicate content, foreign language pages, missing text or bad formatting, design issues, location sensitivity, etc.</p><p>Moreover, we need to know the overall look and feel of the <a href="https://beta.cliqz.com/#channel=blog" rel="noopener noreferrer" target="_blank">SERP</a>, which is a combination of query suggestions, individual results, implicit comparison with other players, breaking news and past experience; it cannot be codified or indicated by a mere collection of metrics.</p><figure><a href="../../static/img/posts/search-quality/serp.jpg"><img alt="" src="../../static/img/posts/search-quality/serp.jpg"></a><figcaption>Figure 4: A variety of SERP components contribute to the overall page quality</figcaption></figure><h2>How does the Human Evaluation Work?</h2><p>Keeping in mind the need for having large amounts of statistical data on one side—to have conclusive numbers measuring search quality—but also having a human eye to catch the quality issues mentioned above, we came up with a tiered solution for quality measurement. With a team of quality analysts and search quality raters, we do weekly assessments of sets of search results under a strict set of guidelines. These guidelines have evolved over time to adapt to the needs of the system, and essentially help us in evaluating the relevance of URLs returned as a response to the user queries.</p><p>Over the course of years, we have manually evaluated approximately 700k distinct queries from all over the world including, but not limited to, Germany, the USA, Canada, the UK, Spain, Russia, France, Italy and Australia accounting for over 3.5 million URLs. In addition to quality monitoring, this data is also used to train the system, as explained in our blog post on <a href="https://0x65.dev/blog/2019-12-06/building-a-search-engine-from-scratch.html" rel="noopener noreferrer" target="_blank">Building a search engine from scratch</a>. Without going into much detail, we now explain how the human evaluation process works:</p><figure><a href="../../static/img/posts/search-quality/humanEvalProcess.jpg"><img alt="" src="../../static/img/posts/search-quality/humanEvalProcess.jpg"></a><figcaption>Figure 5: Human Evaluation Process</figcaption></figure><h3>Pre-Processing: Data Preparation</h3><p>Preparing data for an assessment can roughly be divided into two parts: (1) select queries for the assessment and (2) get corresponding URLs from the system. This data is then uploaded to an in-house built assessment tool, which is used for evaluation. When generating data and assessing them, we need to ensure that we:</p><ul><li>Cover a full range of query frequencies—we extract queries from our Human Web data (our anonymous data collection system; which we discussed in <a href="https://0x65.dev/blog/2019-12-03/human-web-collecting-data-in-a-socially-responsible-manner.html" rel="noopener noreferrer" target="_blank">our previous post</a>). It is important that we cover high-, mid- and low-frequency queries, because otherwise results will be biased—as intuitively the system performs better on high frequency queries than on low-frequency queries. Thus, we use a bucketed approach and pick up queries from 10 different buckets equally, corresponding to a range of frequencies.</li><li>Cover full and partial queries – the set of results and system performance to a partial query (e.g. <code>ru</code>) can be very different from a full query (e.g. <code>ruby</code>).</li><li>Assess news-related queries—news has a different set of requirements compared to general search due to its fast-moving, ephemeral nature, so it is important to monitor news system for correct triggering and updated results.</li><li>Cover hard queries—these are the long-tailed queries that need to be evaluated for monitoring and improving the system.</li><li>Evaluate and re-evaluate queries—since the system is continuously improving, it is important that we re-evaluate the queries with new results. Hence, every week, 70% of the queries evaluated are new, and 30% are repeated.</li><li>Set the right index (based on country), language and filters: i.e. the correct locale, and if the adult filter should be turned on or off.</li><li>Assess fresh and real-time search—these systems update themselves every few minutes, and the classical weekly assessment model doesn’t work in this case.</li></ul><h3>Human Evaluation</h3><p>The actual evaluation requires us to understand the query before we assess the URLs and assign a rating category. One major problem is that all raters (being humans) are different. We try to homogenize the ratings, but what for someone might be “slightly-relevant” for another might be “relevant”. Hence, we have special procedures in place to evaluate the quality of evaluators, and ensure that everyone is consistent in their understanding of the guidelines and almost equally strict (or lenient) in assigning the categories. Being a rater is not an easy task, believe us.</p><p>We briefly describe each of these three components below:</p><h4>Understanding the Query</h4><p>To be able to have a correct assessment, we first have to understand the query before we can assign the ratings to the results. Assessment of a query is not easy, even for a human. E.g., what does <code>&quot;Saturn&quot;</code> mean? And <code>&quot;Munich Madrid &quot;</code> (notice the space after Madrid)? And <code>&quot;gm&quot;</code>? A query without a context can often be misleading, even more so when you try to interpret it as it is being typed. The context is only in the head of the person typing the query. Not even Google reaches so far, at least not yet :-)</p><p>We have to work with the raters so as to not jump quickly into an assessment, but try to figure out multiple contexts for the same query. This is because the results can vary on the basis of:</p><ul><li>User intent, e.g. <code>Apple</code> as a company vs. as a fruit.</li><li>Partial or full query, e.g. <code>Martin Luther</code> has different intents if considered as fully or partially typed.</li><li>User locale, e.g. German results would be fine for people in Germany, but may not be the desired results elsewhere.</li><li>Type of query, e.g. <em>navigational</em> (<code>www.facebook</code>, <code>Lady Gaga</code>, <code>amazon</code>), <em>informational</em> (<code>opening hours rewe</code>, <code>weather orlando</code>), and <em>transactional</em> (<code>buy iphone X</code>, <code>download Cliqz</code>).</li></ul><p>The most common scenario is that a single query has several interpretations, because queries are usually not so explicit: <code>facebook</code> may refer to visit the Facebook page, learn about Facebook on Wikipedia or get information on Facebook stock options. This is where the interpretations come into play:</p><ul><li><strong>Major interpretation</strong>—what <strong>most users</strong> mean when typing the query. In other words, the most likely meaning of a query term. This major interpretation should be clear. Not every query has a major interpretation, and it is possible that a query has more than one.</li><li><strong>Probable interpretation</strong>—what <strong>some users</strong> mean when typing a query, or a <strong>likely meaning</strong> of the query. Every query may have multiple common interpretations.</li><li><strong>Minor interpretations</strong>—what only <strong>a few users</strong> have in mind. An <strong>unlikely interpretation</strong> of the query. Again, every query may have multiple common interpretations.</li></ul><h4>Assessing the URLs</h4><p>To evaluate the URL, we ask the following questions (and many more):</p><ul><li><strong>Authority</strong>—is the page source or content trustworthy? Is the content appropriate for the query? Is this a page managed by a government body? Is it the official social media account of a celebrity? Is it the official homepage of a business? Would you mind giving your credit card information? Would you download (say) a software from here?</li></ul><p>Sometimes user-generated content (e.g. forums) are authoritative and useful, because of the guidelines and quality control by the site owners, e.g. Wikipedia, Stack Overflow, Hacker News.</p><ul><li><strong>Scope</strong>—does the content of the result match the query in range and depth?</li><li><strong>Quality and User Experience</strong>—does the page provide a good user experience?</li></ul><p>There are certain signals that let us evaluate the page, like SSL Certificate and HTTPS protocol, number of views (e.g. YouTube), upvotes to certain answer (e.g. Stack Overflow), references cited (e.g. Wikipedia), etc.</p><h4>The Ratings</h4><p>Based on the context and intent of the query and evaluation of the page, the URL is given a rating as per the following rating categories:</p><h5>1. Vital</h5><ul><li>Official result of an entity (i.e. person, place, company, product or organization).</li><li>Query needs to have only one dominant or major interpretation.</li><li>If a query does not have a major interpretation, there is no <em>vital</em> result.</li><li>If you are not sure because in your opinion two results may be rated as <em>vital</em>, rate them as <em>useful</em> (explained next).</li></ul><p><strong>Queries with vital results:</strong> HTC 11, Angela Merkel, apotheken umschau, vice, bundesliga, o2</p><p><strong>Queries without vital results:</strong> smartphones, us presidents, apotheke, news, tore leverkusen darmstadt, mobile tarife</p><h5>2. Useful</h5><ul><li>Helpful, important result to many/all users.</li><li>Perfect match to the query.</li><li>The result fits the major interpretation in a satisfactory way.</li><li>Well-known and/or specialized webpage.</li><li>The content is:<ul><li>High-quality and well-organized.</li><li>Very convincing, reliable, entertaining, and/or up-to-date.</li></ul></li></ul><p>A <em>useful</em> result could be found on SERP’s top 3 search results and it is so helpful that the user doesn’t need to look for other results.</p><table class="table table-striped"><thead><tr><th>Query</th><th>Corresponding <em>Useful</em> Result</th></tr></thead><tbody><tr><td>USA</td><td>https://en.wikipedia.org/wiki/United_States</td></tr><tr><td>neuer</td><td>https://en.wikipedia.org/wiki/Manuel_Neuer</td></tr></tbody></table><h5>3. Relevant</h5><ul><li>Helpful to several users.</li><li>The result is correlated with the query, but if compared to a <em>useful</em> result, it may be:<ul><li>Less detailed.</li><li>Not fully up to date.</li><li>Not a really convincing source.</li><li>Covering a partial aspect of the query only.</li><li>Covering a common, but not the major interpretation.</li></ul></li><li>Some users would be happy with this result but may want to look for further results. In short, this is a good result, but not as good as a <em>useful</em> one.</li></ul><p>When a query has no major interpretation, which usually happens with incomplete queries, we rate the results as <em>relevant</em>, if they meet the possible intents satisfactorily.</p><table class="table table-striped"><thead><tr><th>Query</th><th>Corresponding <em>Relevant</em> Result</th><th>Comments</th></tr></thead><tbody><tr><td>www.sea</td><td>https://sealoffantasy.de</td><td>This result only covers one of the probable intents</td></tr><tr><td>h and</td><td>https://www2.hm.com/en_us/men.html</td><td>This result covers only a limited scope</td></tr></tbody></table><h5>4. Slightly Relevant</h5><ul><li>Not helpful for most users.</li><li>The result is somehow related to the query, but if compared to a <em>useful</em> or <em>relevant</em> one, it may be:<ul><li>either too specific or too general for the query (scope fail).</li><li>of inferior quality or providing less information.</li><li>Covering a less likely or minor interpretation.</li><li>Completely outdated.</li></ul></li><li>We use this category to rate international e-commerce sites displaying products that are already available from the user’s country.</li><li>In short, this is a bad result, but still related to the query.</li><li>A <em>slightly relevant</em> result can be considered as a “starting point”. That is, a website in which the user has to start looking again because it is so specific that it requires another search and a couple of clicks until reaching a potentially relevant or useful site.</li></ul><table class="table table-striped"><thead><tr><th>Query</th><th>Corresponding <em>Slightly Relevant</em> Result</th><th>Comments</th></tr></thead><tbody><tr><td>Munich</td><td>https://www.imdb.com/title/tt0408306/fullcredits/</td><td>This result covers a minor interpretation - also in a limited scope: the main interpretation is the city of Munich.</td></tr><tr><td>map seoul</td><td>https://www.lonelyplanet.com/maps/asia/south-korea/seoul/</td><td>The quality of the page is really poor: neither information about public transport, nor accommodation, nor restaurants. The map is not interactive, and it is not possible to zoom.</td></tr></tbody></table><h5>5. Off-topic / useless</h5><ul><li>It is not helpful for any user.</li><li>The result is not good and it should not be shown at all, because of one or more of the following reasons:</li><li>It does not meet the user intent. Even if the result might be related to the query, the detail the user is specifically looking for is missing.</li><li>It deals with a different matter.</li><li>It just shows meta-information regarding a popular domain.</li><li>The purpose of the website is to cheat the user (e.g. providing a SERP with unrelated items).</li><li>It is a spam page.</li></ul><table class="table table-striped"><thead><tr><th>Query</th><th>Corresponding Useless/Off-topic Result</th><th>Comments</th></tr></thead><tbody><tr><td>breaking bad online streaming</td><td>https://de.wikipedia.org/wiki/Breaking_Bad</td><td>The result does not meet the user’s intent, i.e. watching the series “Breaking Bad” online. It is a good, authoritative, well-structured and comprehensive page, but does not provide what the user wants.</td></tr><tr><td>amazon.com</td><td>https://www.whois.com/whois/amazon.com</td><td>The major intent is either to land on Amazon’s homepage or to find information related to the company. This page just shows metadata about the domain: IP address, location, status, etc.</td></tr></tbody></table><p>In addition, if the page is not available anymore (e.g. hard or soft 404s and private pages, it is rated as <strong>Not Found</strong>. Pages in a <strong>Foreign Language</strong> are rated accordingly as foreign. Finally, <strong>adult</strong> and <strong>spammy</strong> pages are independently marked with special flags. Each page gets one rating and one or more flags.</p><h3>Post Processing</h3><p>The assessed data is received in the form of the tuple:</p><pre class="code" data-lang=""><code>{
  query: [
    &lt;url1, assessment1&gt;,
    &lt;url2, assessment2&gt;,
    …
    &lt;urln, assessmentn&gt;
  ]
}
</code></pre><p>which undergoes further processing for analysis and stats generation in the following dimensions:</p><ul><li>Stats generation</li><li>Training the system</li><li>Pattern analysis for trend extraction</li><li>Feeding blacklists</li></ul><p>Let us have a look at each of them in a little bit more detail.</p><h4>Stats Generation</h4><p>In its simplest form, the stats are an accumulation of all the assessments to-date, categorized with respect to ratings. This helps as a weekly monitor in case the system goes down and/or if the good categories drop or bad categories go up. These stats are also helpful to compare multiple systems and as pre-release sanity checks.</p><figure><a href="../../static/img/posts/search-quality/statsPlot.jpg"><img alt="" src="../../static/img/posts/search-quality/statsPlot.jpg"></a><figcaption>Figure 6: Rating categories plotted over time</figcaption></figure><p>Another useful metric is frequency- and position- based insights w.r.t. ratings. Not all queries are created equally; also not all results have equal weight – a bad result for a highly frequent query e.g. <code>weather Munich</code> is worse than a bad result for a rarely typed query e.g. <code>the isley brothers motown anthology discogs</code>. Similarly, a bad result at first position is more critical to fix than one at fifth position. It is sometimes important to have a one-to-one comparison of multiple systems. In that case, we calculate a per-query score as follows:</p><p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>score</mtext><mo stretchy="false">(</mo><mtext>query</mtext><mo stretchy="false">)</mo><mo>=</mo><mfrac><mrow><munderover><mo>∑</mo><mi>n</mi><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow></munderover><mfrac><mrow><mtext>rating</mtext><mo stretchy="false">(</mo><msub><mtext>URL</mtext><mi>k</mi></msub><mo stretchy="false">)</mo></mrow><mrow><mtext>pos</mtext><mo stretchy="false">(</mo><msub><mtext>URL</mtext><mi>k</mi></msub><mo stretchy="false">)</mo></mrow></mfrac></mrow><mi>n</mi></mfrac></mrow><annotation encoding="application/x-tex">\text{score}(\text{query}) = \frac{ \sum_{n}^{k=0}{\frac{\text{rating}(\text{URL}_k)}{\text{pos}(\text{URL}_k)}} }{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-.25em"></span><span class="mord text"><span class="mord">score</span></span><span class="mopen">(</span><span class="mord text"><span class="mord">query</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:2.606em;vertical-align:-.686em"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.92em"><span style="top:-2.324em"><span class="pstrut" style="height:3.01em"></span><span class="mord"><span class="mord mathdefault">n</span></span></span><span style="top:-3.2399999999999998em"><span class="pstrut" style="height:3.01em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.92em"><span class="pstrut" style="height:3.01em"></span><span class="mord"><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-.0000050000000000050004em">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.9890079999999999em"><span style="top:-2.40029em;margin-left:0;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="mtight sizing reset-size6 size3"><span class="mord mtight"><span class="mord mtight mathdefault">n</span></span></span></span><span style="top:-3.2029em;margin-right:.05em"><span class="pstrut" style="height:2.7em"></span><span class="mtight sizing reset-size6 size3"><span class="mord mtight"><span class="mord mtight mathdefault" style="margin-right:.03148em">k</span><span class="mtight mrel">=</span><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.29971000000000003em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:.16666666666666666em"></span><span class="mord"><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.01em"><span style="top:-2.655em"><span class="pstrut" style="height:3em"></span><span class="mtight sizing reset-size6 size3"><span class="mord mtight"><span class="mord mtight text"><span class="mord mtight">pos</span></span><span class="mtight mopen">(</span><span class="mord mtight"><span class="mord mtight text"><span class="mord mtight">URL</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.3487714285714287em;margin-right:.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="mtight sizing reset-size3 size1"><span class="mord mtight mathdefault" style="margin-right:.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15122857142857138em"><span></span></span></span></span></span></span><span class="mtight mclose">)</span></span></span></span><span style="top:-3.23em"><span class="pstrut" style="height:3em"></span><span class="frac-line" style="border-bottom-width:.04em"></span></span><span style="top:-3.485em"><span class="pstrut" style="height:3em"></span><span class="mtight sizing reset-size6 size3"><span class="mord mtight"><span class="mord mtight text"><span class="mord mtight">rating</span></span><span class="mtight mopen">(</span><span class="mord mtight"><span class="mord mtight text"><span class="mord mtight">URL</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:.3448em"><span style="top:-2.3487714285714287em;margin-right:.07142857142857144em"><span class="pstrut" style="height:2.5em"></span><span class="mtight sizing reset-size3 size1"><span class="mord mtight mathdefault" style="margin-right:.03148em">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.15122857142857138em"><span></span></span></span></span></span></span><span class="mtight mclose">)</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.52em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.686em"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></p><p>Where, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:.43056em;vertical-align:0"></span><span class="mord mathdefault">n</span></span></span></span> is the number of URLs for a query.</p><p>The scores are then accumulated across the complete set for direct comparison. This strategy is typically used while developing a feature and for fine-tuned observations and examples over multiple iterations. It is important to note that the numerical value is extremely dependent on the methodology, which makes it difficult to interpret in isolation. It is very easy to end up with a comparison between “apples and oranges”. That is one of the reasons why we are not stressing any number in particular in here, as we would not be able to describe in detail the methodology, criteria of reviewers, distribution of queries to be assessed, etc.</p><h4>Training the System</h4><p>As explained in our post on <a href="https://0x65.dev/blog/2019-12-06/building-a-search-engine-from-scratch.html" rel="noopener noreferrer" target="_blank">building a search engine</a>, this data serves as a ground truth for training our ranking system, especially for the long-tailed hard and un-seen queries. The search ranking uses hundreds of heuristic and machine learned features. These features were put together with heuristics in our earlier versions of ranking, but now we use GBDTs (Gradient boosted decision trees)<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>, which we train using supervised learning. The rating is converted to a numerical score (<em>vital</em> - 10, <em>useful</em> - 6, <em>relevant</em> - 4 and so on…) and we train a regression model on it. This is the first stage of the ranking: to remove irrelevant pages. We later use other models to incorporate popularity. Since the ratings are directly used for training the system, this requires us to be specially careful about our rating quality as inconsistencies can lead to corrupted data and, thus, poor training of the system.</p><h4>Pattern Analysis for Trend Extraction</h4><p>The human assessed data is analyzed for patterns and trends in results with low ratings like <em>useless</em> (ratings 1 and 2), and pages not found etc. The problem could be due to a difficult type of query e.g. those with names, numbers, addresses or exceeding a certain length. Or, it could be in the underlying processing e.g. extracting synonyms and forming expansions. We then look at the viability of the solution and focus our efforts on the targeted area.</p><h4>Feeding Blacklists</h4><p>This data is also used to feed our adult filter and populate our blacklist of URLs and domains including 404s and spam. These blacklists work in real-time and are also used to filter out bad results quickly. It is important to note that only those results are blocked which are spam (http://www.de.youtube.de.com/), 404 (http://all.tango.me/), adult (only in case the user has turned the adult filter ON) and illegal (example truncated deliberately). We do not censor or de-rank a page on personal choice or point of view.</p><p>Our users help us in improving the system by sending us reports of broken pages via our webpage: https://cliqz.com/en/report-url. This page is also directly available in the Cliqz browser control center.</p><h2>A Race Against Time</h2><p>Following is a real conversation between a Quality Analyst (QA) and an Engineer (Engr.):</p><ul><li><strong>QA</strong> – Hi, I found this bad example (example here) – can you please have a look?</li><li><strong>Engr.</strong> – Sure… (a few minutes later) I cannot reproduce it. When did this happen?</li><li><strong>QA</strong> – 22 minutes ago…</li><li><strong>Engr.</strong> – Ah, too late – the system updated meanwhile, and the bad result is gone now. Yay!</li><li><strong>QA</strong> – Oh! Yay!</li></ul><p>We are at an exciting phase at Cliqz, where the data updates in near real-time, and classical search quality evaluation doesn’t work. We handle such situations by being extra rigorous in our evaluations during development phase and rely on automated stats to closely monitor the differences with the production system. This allows us to minimize the set of queries that need to be checked manually and overall speeds up the process. At the same time we use our historical data to ensure that nothing critical breaks e.g. vital pages (explained above) remain on top position.</p><p><a name="Testimonials"></a></p><h2>Let’s try Google—a Benchmark</h2><p>We have automated tests to measure our quality, which are also used to train our models: Basically, against the Google SERP. We know what Google answered for many queries, so we can train the models to try to match them as close as possible, but that only gives us one side of the problem, how similar you are to a state-of-the-art search engine, but it tells us nothing for those URLs that we included in the results which are not part of the results from Google. You might think even without checking that they are wrong, and most probably, you would be mistaken. Many times these URLs, once human assessed, turn out to be very good, sometime not. But thanks to the human assessment we can close the circle.</p><p>Quoting from our earlier blog on <a href="https://0x65.dev/blog/2019-12-05/a-new-search-engine.html" rel="noopener noreferrer" target="_blank">Cliqz Journey</a>:</p><blockquote><p>Philosophically, we believe copying is a loaded term, we prefer to use the term learning.</p></blockquote><p>We are not copying Google results; we are learning from them! The following examples show that our results, albeit being different, do meet the user requirements and make them happy - sometimes more than others.</p><p>Example 1: This was actually reported by a user<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>, who was looking for <code>Dr. W. Eggers</code> - the cartographer. Although Google results below are not bad, the user was happier with our results, because they matched his expectations better.</p><figure><a href="../../static/img/posts/search-quality/goodgood1.jpg"><img alt="" src="../../static/img/posts/search-quality/goodgood1.jpg"></a><figcaption>Figure 7: Cliqz vs Google for query “Dr. W. Eggers”</figcaption></figure><p>Example 2: Another example of query <code>titan</code>, where we show significantly different, but good quality results compared to Google.</p><figure><a href="../../static/img/posts/search-quality/goodgood2.jpg"><img alt="" src="../../static/img/posts/search-quality/goodgood2.jpg"></a><figcaption>Figure 8: Cliqz vs Google for query “titan”</figcaption></figure><p>Example 3: Sometimes we mess up too, e.g. for the query <code>fair trade coffee market share</code>, Google gives a correct instant answer, while our results can be better.</p><figure><a href="../../static/img/posts/search-quality/badgood2.jpg"><img alt="" src="../../static/img/posts/search-quality/badgood2.jpg"></a><figcaption>Figure 8: Cliqz vs Google for query “fair trade coffee market share”</figcaption></figure><p>Example 4: However, sometimes Google messes up too, e.g. for the query <code>how to keep an aquarium interesting</code>, Google replaced the term <code>interesting</code> with <code>cool</code>, which resulted in irrelevant results. Our results are quite impressive and relevant in this case.</p><figure><a href="../../static/img/posts/search-quality/goodbad1.jpg"><img alt="" src="../../static/img/posts/search-quality/goodbad1.jpg"></a><figcaption>Figure 8: Cliqz vs Google for query “how to keep an aquarium interesting”</figcaption></figure><p>Example 5: And sometimes they have other parameters to optimize for. For example, for the query <code>clean nespresso machine</code>, the user intent is clearly to get information on cleaning their Nespresso machine and not to buy a new one. Our results are clean and relevant in this case.</p><figure><a href="../../static/img/posts/search-quality/nespresso.jpg"><img alt="" src="../../static/img/posts/search-quality/nespresso.jpg"></a><figcaption>Figure 9: Cliqz vs Google for query “clean nespresso machine”</figcaption></figure><br><p>We also measure quality against the reference search engine at bulk and then do the fine print on a smaller set of query/URL pairs. For sanity, we also human rate query/URL pairs that are returned by the reference search engine, that allow us to have a baseline. The numbers that we get are very dependent on the distribution of queries, strictness of the raters, etc. We have little to no interest in knowing if we are better than Google or not, we only do the measuring with Google for sanity check, what we are interested in knowing is that our quality is steadily increasing.</p><p>In the next few days, we will get back with more details on our underlying search technology and infrastructure. We are far from perfect, but reference search engines are not as good as you might think. Or if you prefer, they are awesome, and we are almost as awesome as they are.</p><h2>References</h2><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li class="footnote-item" id="fn1"><p><a href="https://en.wikipedia.org/wiki/Gradient_boosting" rel="noopener noreferrer" target="_blank">Gradient Boosting - Wikipedia</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li class="footnote-item" id="fn2"><p>User—who does not work at Cliqz. <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section><p></p><p class="share-text">Share this article</p><hr class="share-hr"><div class="share"><ul><li><a href="https://getpocket.com/save?url=https://0x65.dev/blog/2019-12-10/search-quality-at-cliqz.html&amp;title=Search Quality at Cliqz" rel="noopener noreferrer" target="_blank" title="Add to Pocket"><img alt="Add to Pocket" src="../../static/img/social-icons/pocket.svg" loading="lazy"></a></li><li><a href="https://news.ycombinator.com/submitlink?u=https://0x65.dev/blog/2019-12-10/search-quality-at-cliqz.html&amp;t=Search Quality at Cliqz" rel="noopener noreferrer" target="_blank" title="Submit to Hacker News"><img alt="Submit to Hacker News" src="../../static/img/social-icons/ycombinator.svg" loading="lazy"></a></li><li><a href="https://www.reddit.com/submit?url=https://0x65.dev/blog/2019-12-10/search-quality-at-cliqz.html&amp;title=Search Quality at Cliqz" rel="noopener noreferrer" target="_blank" title="Submit to Reddit"><img alt="Submit to Reddit" src="../../static/img/social-icons/reddit.svg" loading="lazy"></a></li><li><a href="https://www.facebook.com/sharer/sharer.php?u=https://0x65.dev/blog/2019-12-10/search-quality-at-cliqz.html&amp;t=Search Quality at Cliqz" rel="noopener noreferrer" target="_blank" title="Share on Facebook"><img alt="Share on Facebook" src="../../static/img/social-icons/facebook.svg" loading="lazy"></a></li><li><a href="https://twitter.com/share?url=https://0x65.dev/blog/2019-12-10/search-quality-at-cliqz.html&amp;text=Search Quality at Cliqz&amp;hashtags=search,quality,humanevaluation via @cliqz" rel="noopener noreferrer" target="_blank" title="Tweet"><img alt="Tweet" src="../../static/img/social-icons/twitter.svg" loading="lazy"></a></li></ul></div></div></div><footer><div class="footer"><div class="divider"></div><p class="p-centered">© Cliqz GmbH - All rights reserved</p><div class="links"><div class="link"><img alt="RSS" src="../../static/img/social-icons/rss.svg" loading="lazy" class="logo-footer"> <a href="../../rss.xml">RSS</a></div><div class="link"><img alt="Tor" src="../../static/img/social-icons/tor.svg" loading="lazy" class="logo-footer"><a href="http://cliqzdevxo33b4h6.onion">Onion</a></div><div class="link"><img alt="DAT" src="../../static/img/social-icons/dat-data-logo.svg" loading="lazy" class="logo-footer"> <a href="dat://ee172d7cd9235b2cf86ea9481e8a40e48cea29c743036621edc79a4765aa0281">DAT</a></div></div></div></footer></div></div></div></body></html>